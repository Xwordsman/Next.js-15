# ç½‘ç«™æ¡†æ¶å¼€å‘æŠ¥å‘Š

## ğŸ“‹ é¡¹ç›®æ¦‚è¿°

**é¡¹ç›®åç§°**: Next.js 15 å¤šè¯­è¨€ç½‘ç«™æ¡†æ¶  
**ç‰ˆæœ¬**: 2.0.0  
**çŠ¶æ€**: âœ… ç”Ÿäº§å°±ç»ª  
**æœ€åæ›´æ–°**: 2025å¹´12æœˆ  

æœ¬æ–‡æ¡£æä¾›äº†åŸºäº Next.js 15 + next-intl æ„å»ºçš„å¤šè¯­è¨€ç½‘ç«™æ¡†æ¶çš„å…¨é¢æ¦‚è¿°ã€‚

## ğŸ—ï¸ æ¶æ„æ¦‚è¿°

### æ ¸å¿ƒæŠ€æœ¯æ ˆ
- **æ¡†æ¶**: Next.js 15 (App Router)
- **ç¼–ç¨‹è¯­è¨€**: TypeScript
- **æ ·å¼**: TailwindCSS
- **è¿è¡Œæ—¶**: React 19
- **å›½é™…åŒ–**: next-intl 4.x
- **éƒ¨ç½²**: Vercel

### é¡¹ç›®ç»“æ„
```
â”œâ”€â”€ app/                          # Next.js App Router
â”‚   â”œâ”€â”€ layout.tsx               # æ ¹å¸ƒå±€
â”‚   â”œâ”€â”€ globals.css              # å…¨å±€æ ·å¼
â”‚   â””â”€â”€ [locale]/                # ç»Ÿä¸€è¯­è¨€è·¯ç”±
â”‚       â”œâ”€â”€ layout.tsx           # è¯­è¨€å¸ƒå±€ + Provider
â”‚       â””â”€â”€ page.tsx             # é¦–é¡µ
â”œâ”€â”€ components/                   # å¯å¤ç”¨ç»„ä»¶
â”‚   â””â”€â”€ layout/
â”‚       â”œâ”€â”€ Header.tsx           # å¯¼èˆªå¤´éƒ¨
â”‚       â””â”€â”€ Footer.tsx           # ç½‘ç«™åº•éƒ¨
â”œâ”€â”€ i18n/                        # next-intl é…ç½®
â”‚   â”œâ”€â”€ routing.ts               # è·¯ç”±é…ç½®
â”‚   â””â”€â”€ request.ts               # è¯·æ±‚é…ç½®
â”œâ”€â”€ locales/                     # ç¿»è¯‘æ–‡ä»¶
â”‚   â”œâ”€â”€ en.json                  # è‹±æ–‡
â”‚   â””â”€â”€ zh-CN.json               # ä¸­æ–‡
â”œâ”€â”€ middleware.ts                # next-intl ä¸­é—´ä»¶
â”œâ”€â”€ next.config.js               # Next.js é…ç½®
â””â”€â”€ package.json                 # ä¾èµ–ç®¡ç†
```

## ğŸŒ å¤šè¯­è¨€ç³»ç»Ÿ

### è¯­è¨€æ”¯æŒ
- **é»˜è®¤è¯­è¨€**: è‹±æ–‡ (`en`) - æ ¹è·¯ç”± `/`ï¼ˆæ— å‰ç¼€ï¼‰
- **å…¶ä»–è¯­è¨€**: ç®€ä½“ä¸­æ–‡ (`zh-CN`) - å‰ç¼€è·¯ç”± `/zh-CN`

### æ ¸å¿ƒä¼˜åŠ¿
- **å•ä¸€ä»£ç åº“**ï¼šæ‰€æœ‰é¡µé¢åªéœ€åœ¨ `app/[locale]/` ä¸‹ç»´æŠ¤ä¸€ä»½
- **è‡ªåŠ¨è·¯ç”±**ï¼šnext-intl ä¸­é—´ä»¶è‡ªåŠ¨å¤„ç†è¯­è¨€æ£€æµ‹å’Œé‡å®šå‘
- **ç±»å‹å®‰å…¨**ï¼šå®Œæ•´çš„ TypeScript æ”¯æŒ

### ç¿»è¯‘ä½¿ç”¨æ–¹å¼
```typescript
// æœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯ç»„ä»¶é€šç”¨
import { useTranslations } from 'next-intl'

function MyComponent() {
  const t = useTranslations()
  return <h1>{t('pages.home.title')}</h1>
}
```

### ç¿»è¯‘æ–‡ä»¶ç»“æ„
```json
{
  "meta": { "title": "...", "description": "..." },
  "common": { "home": "é¦–é¡µ", "about": "å…³äº" },
  "pages": {
    "home": {
      "title": "ä½ å¥½ä¸–ç•Œ",
      "subtitle": "æ¬¢è¿ä¿¡æ¯",
      "cta": "è¡ŒåŠ¨å·å¬"
    }
  },
  "footer": { "copyright": "...", "description": "..." }
}
```

## ğŸ”§ ç»„ä»¶æ¶æ„

### å¸ƒå±€ç»„ä»¶

#### Header ç»„ä»¶ (`components/layout/Header.tsx`)
- **ç±»å‹**: å®¢æˆ·ç«¯ç»„ä»¶ (`'use client'`)
- **åŠŸèƒ½**:
  - Logo å’Œå¯¼èˆª
  - è¯­è¨€åˆ‡æ¢æŒ‰é’®ï¼ˆä½¿ç”¨ next-intl Linkï¼‰
  - å“åº”å¼è®¾è®¡
- **Props**: `{ locale: Locale }`

#### Footer ç»„ä»¶ (`components/layout/Footer.tsx`)
- **ç±»å‹**: å®¢æˆ·ç«¯ç»„ä»¶ (`'use client'`)
- **åŠŸèƒ½**:
  - ç‰ˆæƒä¿¡æ¯
  - è¯­è¨€é“¾æ¥
  - å¤šåˆ—å¸ƒå±€
- **Props**: `{ locale: Locale }`

### é¡µé¢ç»„ä»¶

#### è¯­è¨€å¸ƒå±€ (`app/[locale]/layout.tsx`)
- **ç±»å‹**: æœåŠ¡ç«¯ç»„ä»¶
- **åŠŸèƒ½**:
  - åŒ…è£… `NextIntlClientProvider`
  - åŠ è½½å¯¹åº”è¯­è¨€çš„ç¿»è¯‘
  - è®¾ç½® HTML lang å±æ€§

#### é¦–é¡µ (`app/[locale]/page.tsx`)
- **ç±»å‹**: æœåŠ¡ç«¯ç»„ä»¶
- **åŠŸèƒ½**:
  - è‹±é›„åŒºåŸŸ
  - è¡ŒåŠ¨å·å¬æŒ‰é’®
  - å…³äºåŒºåŸŸ
  - ç»Ÿä¸€å¤„ç†æ‰€æœ‰è¯­è¨€

## ğŸ›£ï¸ è·¯ç”±ç³»ç»Ÿ

### è·¯ç”±ç»“æ„
```
/                    â†’ app/[locale]/page.tsx (è‹±æ–‡ï¼Œlocale='en')
/zh-CN               â†’ app/[locale]/page.tsx (ä¸­æ–‡ï¼Œlocale='zh-CN')
/about               â†’ app/[locale]/about/page.tsx (è‹±æ–‡)
/zh-CN/about         â†’ app/[locale]/about/page.tsx (ä¸­æ–‡)
```

### ä¸­é—´ä»¶é…ç½® (`middleware.ts`)
```typescript
import createMiddleware from 'next-intl/middleware'
import { routing } from './i18n/routing'

export default createMiddleware(routing)

export const config = {
  matcher: ['/((?!api|_next|.*\\..*).*)']
}
```

## ğŸš€ å¼€å‘å·¥ä½œæµ

### å¿«é€Ÿå¼€å§‹
```bash
npm install
npm run dev
```

### æ·»åŠ æ–°è¯­è¨€
1. åœ¨ `locales/` åˆ›å»ºè¯­è¨€æ–‡ä»¶ï¼ˆå¦‚ `ja.json`ï¼‰
2. åœ¨ `i18n/routing.ts` æ·»åŠ ï¼š
   ```typescript
   locales: ['en', 'zh-CN', 'ja']
   ```

### æ·»åŠ æ–°é¡µé¢
1. åœ¨ `app/[locale]/` ä¸‹åˆ›å»ºé¡µé¢
2. åœ¨å„è¯­è¨€åŒ…æ·»åŠ ç¿»è¯‘
3. å®Œæˆï¼

## ğŸ› æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

#### ç¿»è¯‘ä¸æ˜¾ç¤º
- ç¡®ä¿åœ¨ `[locale]/layout.tsx` ä¸­æ­£ç¡®åŒ…è£…äº† `NextIntlClientProvider`
- æ£€æŸ¥è¯­è¨€åŒ… JSON æ ¼å¼æ˜¯å¦æ­£ç¡®

#### è·¯ç”± 404
- æ£€æŸ¥ `middleware.ts` çš„ matcher é…ç½®
- ç¡®ä¿é¡µé¢åœ¨ `app/[locale]/` ç›®å½•ä¸‹

#### å®¢æˆ·ç«¯ç»„ä»¶ç¿»è¯‘æŠ¥é”™
- ç¡®ä¿ç»„ä»¶è¢« `NextIntlClientProvider` åŒ…è£¹
- å®¢æˆ·ç«¯ç»„ä»¶éœ€è¦æ ‡è®° `'use client'`

## ğŸ“ˆ æ€§èƒ½ä¼˜åŒ–

### å·²å®ç°çš„ä¼˜åŒ–
- **æœåŠ¡ç«¯æ¸²æŸ“**: æ‰€æœ‰é¡µé¢é¢„æ¸²æŸ“
- **é™æ€ç”Ÿæˆ**: `generateStaticParams` é¢„ç”Ÿæˆè¯­è¨€è·¯ç”±
- **ä»£ç åˆ†å‰²**: è‡ªåŠ¨ç»„ä»¶çº§åˆ†å‰²
- **ç¿»è¯‘æŒ‰éœ€åŠ è½½**: åªåŠ è½½å½“å‰è¯­è¨€çš„ç¿»è¯‘

## ğŸ”’ å®‰å…¨è€ƒè™‘

- **XSS é˜²æŠ¤**: React å†…ç½®è½¬ä¹‰
- **CSRF é˜²æŠ¤**: Next.js å†…ç½®ä¿æŠ¤
- **HTTPS**: Vercel å¼ºåˆ¶æ‰§è¡Œ

## ğŸ“š æœªæ¥å¼€å‘æŒ‡å—

### æœ€ä½³å®è·µ
1. æ‰€æœ‰é¡µé¢åœ¨ `app/[locale]/` ä¸‹åˆ›å»º
2. ä½¿ç”¨ `useTranslations()` è·å–ç¿»è¯‘
3. ä½¿ç”¨ `@/i18n/routing` çš„ `Link` è¿›è¡Œå¯¼èˆª
4. å®¢æˆ·ç«¯ç»„ä»¶æ ‡è®° `'use client'`

### æ‰©å±•è·¯çº¿å›¾
- [ ] æ·»åŠ æ›´å¤šé¡µé¢ï¼ˆå…³äºã€è”ç³»ã€åšå®¢ï¼‰
- [ ] å®ç°ç”¨æˆ·è®¤è¯
- [ ] æ·»åŠ  CMS é›†æˆ
- [ ] æ·»åŠ æ›´å¤šè¯­è¨€æ”¯æŒ

## ğŸ”§ ç‰ˆæœ¬å†å²

### v2.0.0 (2025-12)
- è¿ç§»åˆ° next-intl
- ç»Ÿä¸€ä»£ç åº“ï¼Œåˆ é™¤é‡å¤é¡µé¢
- ç®€åŒ–è¯­è¨€åˆ‡æ¢é€»è¾‘

### v1.0.0 (2025-11)
- åˆå§‹ç‰ˆæœ¬
- è‡ªå®šä¹‰å¤šè¯­è¨€å®ç°
- åŒç›®å½•ç»“æ„

---

**æ¡†æ¶çŠ¶æ€**: ğŸŸ¢ **ç”Ÿäº§å°±ç»ª**
